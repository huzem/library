<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dijital K√ºt√ºphane - HUZEM</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
</script>

<style>
:root{
  --bordo:#7a0c18;
  --bordo2:#9c1a2b;
  --bg:#f4f4f4;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Segoe UI",sans-serif;
}

body{
  background:var(--bg);
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none; 
}

/* Gƒ∞Rƒ∞≈û PANELƒ∞ STƒ∞LLERƒ∞ */
#login-overlay {
  position: fixed;
  inset: 0;
  background: var(--bordo);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  padding: 20px;
}

.login-box {
  background: white;
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  text-align: center;
  max-width: 400px;
  width: 100%;
}

.login-box img {
  height: 80px;
  margin-bottom: 20px;
}

.login-box h2 {
  color: var(--bordo);
  margin-bottom: 20px;
  font-size: 20px;
}

.login-box input {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  border: 2px solid #ddd;
  border-radius: 8px;
  outline: none;
  font-size: 16px;
  text-align: center;
}

.login-box input:focus {
  border-color: var(--bordo);
}

.login-box button {
  background: var(--bordo);
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  width: 100%;
  transition: 0.3s;
}

.login-box button:hover {
  background: var(--bordo2);
}

/* ANA ƒ∞√áERƒ∞K BA≈ûLANGI√áTA Gƒ∞ZLƒ∞ */
#main-content {
  display: none;
}

/* HEADER */
header{
  background:linear-gradient(90deg,var(--bordo),var(--bordo2));
  color:white;
  padding:16px 20px;
  text-align:center;
  letter-spacing:.5px;
}

.header-top{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:16px;
  flex-wrap:wrap;
}

.header-top img{
  height:60px;
}

.header-title{
  font-size:24px;
  font-weight:bold;
}

.header-subtitle{
  font-size:16px;
  margin-top:4px;
  font-weight:500;
}

/* K√úT√úPHANE IZGARASI */
.library{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:30px;
  padding:40px;
}

.book{
  background:white;
  border-radius:12px;
  padding:12px;
  cursor:pointer;
  transition:.3s;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

.book:hover{
  transform:translateY(-8px) scale(1.03);
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

.book img{
  width:100%;
  height:220px;
  object-fit:cover;
  border-radius:8px;
}

.book-title{
  margin-top:8px;
  font-weight:600;
  font-size:15px;
  text-align:center;
}

.book-author{
  font-size:12px;
  color:#666;
  text-align:center;
}

/* MODAL & PDF G√ñR√úNT√úLEYƒ∞Cƒ∞ */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.95);
  display:none;
  flex-direction:column;
  z-index: 9999;
}

.modal-content {
  display: flex;
  flex: 1;
  gap: 0;
  min-height: 0;
  overflow: hidden;
}

.pdf-viewer-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  min-height: 0;
  overflow-y: auto;
}

.comments-sidebar {
  width: 380px;
  background: white;
  border-left: 2px solid var(--bordo);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.modal-header{
  background:var(--bordo);
  color:white;
  padding:12px 20px;
  font-size:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.close-btn{
  background:white;
  border:none;
  padding:6px 12px;
  font-weight:bold;
  cursor:pointer;
  border-radius:6px;
  color: var(--bordo);
}

.viewer-container {
    flex: 1;
    overflow-y: auto;
    background: #525659;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    position: relative;
    min-height: 0;
}

.page-wrapper {
    position: relative;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
}

.pdf-page-canvas {
    display: block;
    max-width: 100%;
    pointer-events: none;
}

.link-layer {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
}

.pdf-link {
    position: absolute;
    cursor: pointer;
    background: rgba(255, 255, 0, 0);
    transition: background 0.2s;
}

.pdf-link:hover {
    background: rgba(255, 255, 0, 0.2); 
    border: 1px solid rgba(0,0,0,0.2);
}

.watermark-overlay {
    position: fixed;
    top: 60px;
    left: 0; 
    right: 0; 
    bottom: 0;
    pointer-events: none;
    z-index: 1000;
    overflow: hidden;
    opacity: 0.15;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='150px' width='150px'><text transform='translate(20, 100) rotate(-45)' fill='black' font-size='20' font-family='Arial'>HUZEM¬©</text></svg>");
}

.loading {
    color: white;
    font-size: 18px;
    margin-top: 50px;
    font-weight: bold;
}

img, canvas, .viewer-container {
  -webkit-user-drag: none;
  user-drag: none;
}
</style>
</head>
<body oncontextmenu="return false">

<!-- ≈ûƒ∞FRELEMEYƒ∞ YORUMLAMA YAPARAK KAPATTIK
    
<div id="login-overlay">
  <div class="login-box">
   <img src="https://hitit.edu.tr/images/HititLogoYeni.svg"
     alt="Hitit Logo"
     style="background-color: white; padding: 5px;">

    <h2>Dijital K√ºt√ºphane Eri≈üimi</h2>
    <input type="password" id="passwordInput" placeholder="≈ûifreyi Giriniz" onkeydown="if(event.key==='Enter') checkPassword()">
    <button onclick="checkPassword()">Giri≈ü Yap</button>
    <p id="loginError" style="color: #7a0c18; margin-top: 10px; font-size: 14px; display: none; font-weight: bold;">‚ö†Ô∏è Hatalƒ± ≈üifre!</p>
  </div>
</div>

-->
<div id="main-content">
    <header>
      <div class="header-top">
        <img src="https://hitit.edu.tr/images/HititLogoYeni.svg"
     alt="Hitit √úniversitesi Logo"
     style="background-color:white; padding:6px; border-radius:8px;">

        <div>
          <div class="header-title">Uzaktan Eƒüitim Uygulama ve Ara≈ütƒ±rma Merkezi (HUZEM)</div>
          <div class="header-subtitle">Kaynak K√ºt√ºphanesi</div>
        </div>
      </div>
    </header>

    <div class="library" id="library"></div>

    <div class="modal" id="modal">
      <div class="modal-header">
        <span id="modalTitle">Kitap Okuyucu</span>
        <button class="close-btn" onclick="closeViewer()">Kapat</button>
      </div>
      
      <div class="modal-content">
        <div class="pdf-viewer-section">
          <div class="viewer-container" id="pdfContainer">
            <div id="loadingText" class="loading">Kitap Y√ºkleniyor...</div>
            <div class="watermark-overlay"></div>
          </div>
        </div>

        <div class="comments-sidebar" id="commentsSection">
          <h3 style="color: var(--bordo); margin-bottom: 12px; padding: 15px 15px 0 15px; font-size: 16px;">üí¨ Yorum</h3>
          <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSey6PHs6VUzsog_8-mWaszOlSGWyb7bi64Szra7p0VodsJm7A/viewform?embedded=true" width="100%" height="900" frameborder="0" marginheight="0" marginwidth="0" style="border: none; flex-shrink: 0;">Y√ºkleniyor‚Ä¶</iframe>
        </div>
      </div>
    </div>
</div>

<script>
// ≈ûifre Kontrol Fonksiyonu
function checkPassword() {
  const pass = document.getElementById("passwordInput").value;
  const errorMsg = document.getElementById("loginError");
  const loginOverlay = document.getElementById("login-overlay");
  const mainContent = document.getElementById("main-content");

  if (pass === "hitit2026") {
    loginOverlay.style.display = "none";
    mainContent.style.display = "block";
  } else {
    errorMsg.style.display = "block";
    document.getElementById("passwordInput").value = "";
    document.getElementById("passwordInput").focus();
  }
}

const books = [
  { title:"Mod√ºl 1: Yapay Zek√¢ ve Eƒüitim", author:"HUZEM", cover:"kapaklar/ai1.png", file:"kitaplƒ±k/ai1.pdf" },
  { title:"Mod√ºl 2: Y√ºksek√∂ƒüretimde Yapay Zek√¢ Destekli √ñƒüretim", author:"HUZEM", cover:"kapaklar/ai2.png", file:"kitaplƒ±k/ai2.pdf" },
  { title:"Mod√ºl 3: Y√ºksek√∂ƒüretimde Kullanƒ±labilecek Yapay Zek√¢ Uygulamalarƒ±", author:"HUZEM", cover:"kapaklar/ai3.png", file:"kitaplƒ±k/ai3.pdf" },
  { title:"Mod√ºl 4: Y√ºksek√∂ƒüretimde Yapay Zek√¢ Ara√ßlarƒ±nƒ±n √ñƒüretim Uygulamalarƒ±na Entegrasyonu", author:"HUZEM", cover:"kapaklar/ai4.png", file:"kitaplƒ±k/ai4.pdf" },
  { title:"Mod√ºl 1: √ñl√ßme ve Deƒüerlendirmede Temel Kavramlar", author:"HUZEM", cover:"kapaklar/ytd1.png", file:"kitaplƒ±k/ytd1.pdf" },
  { title:"Mod√ºl 2: Yeterlilik ve Performans Temelli √ñl√ßme-Deƒüerlendirmeye Giri≈ü", author:"HUZEM", cover:"kapaklar/ytd2.png", file:"kitaplƒ±k/ytd2.pdf" },
  { title:"Mod√ºl 3: Yeterlilik Temelli √ñl√ßme-Deƒüerlendirme Y√∂ntemleri, Stratejileri ve Puanlama Ara√ßlarƒ±", author:"HUZEM", cover:"kapaklar/ytd3.png", file:"kitaplƒ±k/ytd3.pdf" },
  { title:"Mod√ºl 4: Performans Deƒüerlendirmede Etkili ve Nitelikli Geribildirim Verme Rehberi", author:"HUZEM", cover:"kapaklar/ytd4.png", file:"kitaplƒ±k/ytd4.pdf" },
  { title:"Mod√ºl 5: Eƒüitici Eƒüitimleri Sonucunda Birimlerden Gelen Uygulama √ñrnekleri", author:"HUZEM", cover:"kapaklar/ytd5.png", file:"kitaplƒ±k/ytd5.pdf" }
];

const library = document.getElementById("library");
const modal = document.getElementById("modal");
const pdfContainer = document.getElementById("pdfContainer");
const title = document.getElementById("modalTitle");
const loadingText = document.getElementById("loadingText");

books.forEach((b,i)=>{
  const el = document.createElement("div");
  el.className="book";
  el.innerHTML=`
    <img src="${b.cover}" onerror="this.src='https://via.placeholder.com/160x220?text=Kapak+Yok'">
    <div class="book-title">${b.title}</div>
    <div class="book-author">${b.author}</div>
  `;
  el.onclick=()=>loadPDF(b);
  library.appendChild(el);
});

async function loadPDF(book) {
    modal.style.display = "flex";
    title.textContent = book.title;
    loadingText.style.display = "block";
    
    const oldPages = document.querySelectorAll('.page-wrapper');
    oldPages.forEach(el => el.remove());

    try {
        const loadingTask = pdfjsLib.getDocument(book.file);
        const pdf = await loadingTask.promise;
        loadingText.style.display = "none";

        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
            const page = await pdf.getPage(pageNum);
            const scale = 1.5;
            const viewport = page.getViewport({ scale: scale });

            const wrapper = document.createElement("div");
            wrapper.className = "page-wrapper";
            wrapper.style.width = viewport.width + "px";
            wrapper.style.height = viewport.height + "px";

            const canvas = document.createElement("canvas");
            canvas.className = "pdf-page-canvas";
            const context = canvas.getContext("2d");
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            const linkLayer = document.createElement("div");
            linkLayer.className = "link-layer";

            const annotations = await page.getAnnotations();
            annotations.forEach(annotation => {
                if (annotation.subtype === 'Link' && annotation.url) {
                    const rect = viewport.convertToViewportRectangle(annotation.rect);
                    const x = Math.min(rect[0], rect[2]);
                    const y = Math.min(rect[1], rect[3]);
                    const width = Math.abs(rect[2] - rect[0]);
                    const height = Math.abs(rect[3] - rect[1]);

                    const link = document.createElement("a");
                    link.href = annotation.url;
                    link.target = "_blank";
                    link.className = "pdf-link";
                    link.style.left = x + "px";
                    link.style.top = y + "px";
                    link.style.width = width + "px";
                    link.style.height = height + "px";
                    linkLayer.appendChild(link);
                }
            });

            wrapper.appendChild(canvas);
            wrapper.appendChild(linkLayer);
            pdfContainer.appendChild(wrapper);

            await page.render({ canvasContext: context, viewport: viewport }).promise;
        }
    } catch (error) {
        console.error("PDF Hatasƒ±:", error);
        loadingText.textContent = "PDF y√ºklenemedi.";
    }
}

function closeViewer(){
  modal.style.display="none";
}

// G√ºvenlik Kƒ±sƒ±tlamalarƒ±
document.addEventListener('contextmenu', event => event.preventDefault());
document.addEventListener("keydown", function(e){
    if (e.ctrlKey && (e.key === 'c' || e.key === 's' || e.key === 'p' || e.key === 'u' || e.key === 'a')) {
        e.preventDefault();
        return false;
    }
});
</script>

</body>
</html>
